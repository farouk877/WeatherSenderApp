(this.webpackJsonpweathersender=this.webpackJsonpweathersender||[]).push([[0],{108:function(e,t,a){e.exports=a.p+"static/media/weather.f197597c.svg"},139:function(e,t,a){e.exports=a(238)},144:function(e,t,a){},238:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(3),c=a.n(s),i=(a(144),a(58)),o=a(59),l=a(26),u=a(66),b=a(64),m=a(89),h=(a(91),a(108)),d=a.n(h),p=a(241),g=p.a.Title,f=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"TitleContainer"},r.a.createElement("div",{className:"ImageContainer"},r.a.createElement("img",{src:d.a,alt:"sunlogo",className:"App-logo"})),r.a.createElement("div",{className:"TitleTextContainer"},r.a.createElement(g,{level:3},"Weather",r.a.createElement("br",null),"Sender"))))}}]),a}(n.Component),v=a(243),E=a(242),S=a(244),x=a(240),y=a(245),N=a(246),C=a(247),T=a(248),k=(v.a.Step,E.a.Option,p.a.Text),B=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={apiResponse:"",dbResponse:"",isLoading:!1,subscribeError:"",phoneNumber:"",zipcode:"",timePreference:"A",phoneNumberStatus:"#c8c8c8",zipcodeStatus:"#c8c8c8",resultBoxVisible:"hidden"},n.onTextboxChangePhoneNumber=n.onTextboxChangePhoneNumber.bind(Object(l.a)(n)),n.onTextboxChangeZipcode=n.onTextboxChangeZipcode.bind(Object(l.a)(n)),n.onTextboxChangeTimePreference=n.onTextboxChangeTimePreference.bind(Object(l.a)(n)),n.onSubscribe=n.onSubscribe.bind(Object(l.a)(n)),n.unsubscribeClicked=n.unsubscribeClicked.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.callAPI(),this.callDB()}},{key:"callAPI",value:function(){var e=this;fetch("https://weathersenderapp.herokuapp.com/testAPI").then((function(e){return e.text()})).then((function(t){return e.setState({apiResponse:t})})).catch((function(e){return e}))}},{key:"callDB",value:function(){var e=this;fetch("https://weathersenderapp.herokuapp.com/testDB").then((function(e){return e.text()})).then((function(t){return e.setState({dbResponse:t})})).catch((function(e){return e}))}},{key:"onTextboxChangePhoneNumber",value:function(e){var t=e.target.value.replace(/\D/g,"").substring(0,10),a=!1;t.length<this.state.phoneNumber.length&&(a=!0);var n=t.length;t=0==n?t:n<3?"("+t:3==n?"("+t+(a?"":") "):n<6?"("+t.substring(0,3)+") "+t.substring(3,6):6==n?"("+t.substring(0,3)+") "+t.substring(3,6)+(a?"":"-"):"("+t.substring(0,3)+") "+t.substring(3,6)+"-"+t.substring(6,10),e.target.value=t,this.setState({phoneNumber:e.target.value});var r=e.target.value.replace(/\D/g,"").substring(0,10).length;10==r?this.setState({phoneNumberStatus:"#009100"}):0!=r&&10!=r?this.setState({phoneNumberStatus:"#f0a400"}):this.setState({phoneNumberStatus:"#c8c8c8"})}},{key:"onTextboxChangeZipcode",value:function(e){var t=e.target.value.replace(/\D/g,"").substring(0,5);e.target.value=t,this.setState({zipcode:e.target.value}),5==e.target.value.length?this.setState({zipcodeStatus:"#009100"}):0!=e.target.value.length&&5!=e.target.value.length?this.setState({zipcodeStatus:"#f0a400"}):this.setState({zipcodeStatus:"#c8c8c8"})}},{key:"onTextboxChangeTimePreference",value:function(e){var t=document.getElementById("preferencea").checked,a=document.getElementById("preferenceb").checked;t?this.setState({timePreference:"A"}):a&&this.setState({timePreference:"B"})}},{key:"onSubscribe",value:function(){var e=this,t=this.state,a=t.phoneNumber,n=t.zipcode,r=t.timePreference;this.setState({isLoading:!0,resultBoxVisible:"hidden"});var s=a;s=s.replace(/\D/g,"").substring(0,10),fetch("https://weathersenderapp.herokuapp.com/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:s,zipcode:n,timePreference:r})}).then((function(e){return e.json()})).then((function(t){setTimeout((function(){e.setState({isLoading:!1}),t.success?e.setState({subscribeError:t.message,phoneNumber:"",zipcode:"",resultBoxVisible:"visible",phoneNumberStatus:"#c8c8c8",zipcodeStatus:"#c8c8c8"}):e.setState({subscribeError:t.message,resultBoxVisible:"visible"})}),500)}))}},{key:"unsubscribeClicked",value:function(){var e=document.getElementById("unsubscribeMessage").style;"none"==e.display||""==e.display?e.display="inline-block":e.display="none"}},{key:"render",value:function(){var e=this.state,t=(e.apiResponse,e.dbResponse,e.isLoading),a=e.subscribeError,n=e.phoneNumber,s=e.zipcode,c=(e.timePreference,e.phoneNumberStatus),i=e.zipcodeStatus,o=e.resultBoxVisible;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement(f,null),r.a.createElement("div",{className:"parentContainer"},r.a.createElement("div",{className:"Introduction"},r.a.createElement(k,{strong:!0},"Welcome to WeatherSender!"),r.a.createElement("br",null),r.a.createElement(k,null,"Subscribe to our free daily weather updates via SMS."),r.a.createElement("br",null),r.a.createElement(k,null,"Available for United States only."),r.a.createElement("br",null),r.a.createElement("div",{className:"unsubscribeText"},r.a.createElement("span",{id:"unsubscribeButton",onClick:this.unsubscribeClicked},r.a.createElement(k,{code:!0},"Unsubscribe")),r.a.createElement(k,null," anytime.")),r.a.createElement("div",{id:"unsubscribeMessage"},r.a.createElement(k,{copyable:{text:"2058755346"}},"To unsubscribe, text 'REMOVE' to +1 (205) 875-5346"))),r.a.createElement("div",{className:"InputContainer"},r.a.createElement("div",{className:"InputField"},r.a.createElement(S.a,{type:"number",value:n,onChange:this.onTextboxChangePhoneNumber,addonBefore:r.a.createElement(N.a,{style:{color:"#08c"}}),suffix:r.a.createElement(C.a,{style:{color:c}}),size:"large",placeholder:"Phone Number"})),r.a.createElement("div",{className:"InputField"},r.a.createElement(S.a,{type:"number",value:s,onChange:this.onTextboxChangeZipcode,addonBefore:r.a.createElement(T.a,{style:{color:"#08c"}}),suffix:r.a.createElement(C.a,{style:{color:i}}),size:"large",placeholder:"Zipcode"}))),r.a.createElement("div",{className:"RadioContainer"},r.a.createElement(k,null,"Send weather updates at:"),r.a.createElement(x.default.Group,{defaultValue:"preferencea",size:"large"},r.a.createElement(x.default.Button,{id:"preferencea",value:"preferencea",className:"RadioButton",onChange:this.onTextboxChangeTimePreference},"9pm for next day"),r.a.createElement("br",null),r.a.createElement(x.default.Button,{id:"preferenceb",value:"preferenceb",className:"RadioButton",onChange:this.onTextboxChangeTimePreference},"6am for same day"))),r.a.createElement("div",{className:"subscribeButton"},r.a.createElement(m.a,{type:"primary",onClick:this.onSubscribe,size:"large",shape:"round",loading:t},"Subscribe")),r.a.createElement("div",{id:"subscriptionStatusBox",style:{visibility:o}},r.a.createElement(y.a,{message:a,type:"S"!=a.slice(0,1)?"error":"success",showIcon:!0}))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},91:function(e,t,a){}},[[139,1,2]]]);
//# sourceMappingURL=main.6b015010.chunk.js.map